---
sudo: false
language: ruby
cache: bundler
env:
- LOGSTASH_VERSION=6.4.2 INTEGRATION=false
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=legacy INTEGRATION=true ES_VERSION=1.7.6 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=legacy INTEGRATION=true ES_VERSION=2.4.4 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=legacy INTEGRATION=true ES_VERSION=5.6.9 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=oss INTEGRATION=true ES_VERSION=6.4.2 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=default INTEGRATION=true ES_VERSION=6.4.2 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=default INTEGRATION=true ES_VERSION=master TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=legacyxpack SECURE_INTEGRATION=true INTEGRATION=true ES_VERSION=5.6.9 TEST_DEBUG=true
- LOGSTASH_VERSION=6.4.2 DISTRIBUTION=default SECURE_INTEGRATION=true INTEGRATION=true ES_VERSION=6.4.2 TEST_DEBUG=true

rvm:
- jruby-1.7.25
matrix:
  include:
  - rvm: jruby-9.1.13.0
    env: LOGSTASH_VERSION=7.0.0-alpha1-SNAPSHOT
  - rvm: jruby-9.1.13.0
    env: LOGSTASH_VERSION=6.5.0-SNAPSHOT
  - rvm: jruby-9.1.13.0
    env: LOGSTASH_VERSION=6.4.2
  - rvm: jruby-1.7.27
    env: LOGSTASH_VERSION=5.6.12
  allow_failures:
  - env: DISTRIBUTION=default INTEGRATION=true ES_VERSION=master TEST_DEBUG=true
  fast_finish: true
install: true
script: ci/build.sh
jdk: oraclejdk8

